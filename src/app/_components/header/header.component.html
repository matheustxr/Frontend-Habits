<header>
  <div class="w-full max-w-5xl mx-auto flex items-center justify-between">
    <img src="/logo.svg" alt="Habits" />

    <ng-container *ngIf="!authService.isLoggedIn()">
      <button
        (click)="showAuthModal()"
        class="flex gap-2 items-center text-white border border-violet-500 font-semibold rounded-lg px-6 py-4 hover:border-violet-300 transition-colors"
      >
        <i class="pi pi-user text-violet-500"></i>
        Entrar
      </button>
    </ng-container>

    <ng-container *ngIf="authService.isLoggedIn()">
      <div class="flex items-center gap-4">
        <button
          (click)="menu.toggle($event)"
          class="flex items-center gap-3 text-white p-3 border border-violet-500 rounded-lg hover:bg-zinc-800 transition-colors"
          aria-label="Menu do usuÃ¡rio"
        >
          <i class="pi pi-user text-xl"></i>
          <span class="font-semibold">{{ userName }}</span>
          <i class="pi pi-chevron-down text-sm"></i>
        </button>

        <p-menu #menu [model]="userMenuItems" [popup]="true"></p-menu>
      </div>
    </ng-container>
  </div>

  <p-dialog
    [header]="modalHeader"
    [(visible)]="displayModal"
    [modal]="true"
    [closable]="true"
    [breakpoints]="{ '1500px': '40vw', '1199px': '75vw', '575px': '90vw' }" [style]="{ width: 'auto' }"
    class="bg-zinc-900"
  >
    @switch (modalContent) {
      @case ('auth') {
        <ng-container>
          <app-login-form
            *ngIf="!showCreateAccountForm"
            (switchToCreateAccount)="toggleFormView()"
          />
          <app-create-account-form
            *ngIf="showCreateAccountForm"
            (switchToLogin)="toggleFormView()"
          />
        </ng-container>
      }

      @case ('profile') {
        <app-profile-form />
      }

      @case ('change-password') {
        <app-change-password-form />
      }
    }
  </p-dialog>
</header>
