<form (ngSubmit)="onSubmit()" #passwordForm="ngForm" class="mx-auto w-full min-w-[300px] flex flex-col items-center gap-4">

  <app-text-input
    label="Senha Atual"
    name="currentPassword"
    type="password"
    [(ngModel)]="passwords.current"
    required
    class="w-full"
  ></app-text-input>

  <app-text-input
    label="Nova Senha"
    name="newPassword"
    type="password"
    [(ngModel)]="passwords.new"
    required
    (focus)="isPasswordFocused = true"
    (blur)="isPasswordFocused = false"
    class="w-full"
  ></app-text-input>

  @if (isPasswordFocused) {
    <div class="text-zinc-400 text-xs self-start -mt-2">
      <ul class="list-disc list-inside ml-2">
        <li>Mínimo 8 caracteres</li>
        <li>Letra maiúscula, minúscula, número e caractere especial (!&#64;#$)</li>
      </ul>
    </div>
  }

  <app-text-input
    label="Confirmar Nova Senha"
    name="confirmPassword"
    type="password"
    [(ngModel)]="passwords.confirm"
    required
    class="w-full"
  ></app-text-input>

  <button
    type="submit"
    [disabled]="!passwordForm.valid || isLoading"
    class="w-full mt-6 rounded-lg p-4 font-semibold bg-violet-600 hover:bg-violet-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
  >
    @if (isLoading) {
      <span>Salvando...</span>
    } @else {
      <span>Alterar Senha</span>
    }
  </button>

  @if(successMessage) {
    <p class="text-green-400 text-center mt-2">{{ successMessage }}</p>
  }
  @if(errorMessage) {
    <p class="text-red-400 text-center mt-2">{{ errorMessage }}</p>
  }
</form>
